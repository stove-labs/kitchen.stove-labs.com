(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{109:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return p})),n.d(t,"default",(function(){return d}));var a=n(2),o=n(6),r=(n(0),n(163)),i=n(168),c=n(174),s={id:"signature",title:"Signatures"},l={id:"knowledge/tezos_protocol/cryptography/signature",isDocsHomePage:!1,title:"Signatures",description:"Public-key cryptography and its digital signatures belong to the building blocks of a blockchain. They are always used when a piece of information needs to be written to the blockchain ledger. So called transactions carry the instructions to do so, but a digital signature is required to prove that it comes from the owner or authorized entity. In other words, the transaction initiator needs to authorize the action. The protocol takes care of validating or checking of the correctness of the signature.",source:"@site/docs/knowledge/tezos_protocol/cryptography/signature.mdx",permalink:"/docs/knowledge/tezos_protocol/cryptography/signature",editUrl:"https://github.com/stove-labs/learn.stove-labs.com/edit/master/website/docs/knowledge/tezos_protocol/cryptography/signature.mdx",sidebar:"wiki",previous:{title:"Key pair",permalink:"/docs/knowledge/tezos_protocol/cryptography/key-pair"},next:{title:"Protocol Architecture",permalink:"/docs/knowledge/tezos_protocol/protocol"}},p=[],b={rightToc:p};function d(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"key-pair"}),"Public-key cryptography")," and its digital signatures belong to the building blocks of a blockchain. They are always used when a piece of information needs to be written to the blockchain ledger. So called ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"../operations/transaction"}),"transactions")," carry the instructions to do so, but a digital signature is required to prove that it comes from the owner or authorized entity. In other words, the transaction initiator needs to authorize the action. The ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"../protocol"}),"protocol")," takes care of ",Object(r.b)("em",{parentName:"p"},"validating")," or checking of the correctness of the signature. "),Object(r.b)("p",null,"Consider that Alice has created two keys, a ",Object(r.b)("strong",{parentName:"p"},"secret")," and a ",Object(r.b)("strong",{parentName:"p"},"public")," key. Those are not the same keys, but they are mathematically connected",Object(r.b)("sup",Object(a.a)({parentName:"p"},{id:"fnref-1"}),Object(r.b)("a",Object(a.a)({parentName:"sup"},{href:"#fn-1",className:"footnote-ref"}),"1")),". She keeps her secret key, as the name suggests, private at all times. She uses it to digitally sign a message (or transaction). Anyone with Alice' pubilc key is able to verify that it was signed with the corresponding secret key. "),Object(r.b)("center",null,Object(r.b)(c.a,{chart:'\ngraph TD\n\toriginal["Original Text"]--\x3esigning([signing])\n  signing--\x3esigned["Signed Text"]\n  signed--\x3everifying([verifying])\n  subgraph payload\n    original\n    signed\n    verified\n  end\n  verifying--\x3everified[Verified Text]\n  subgraph key-pair\n    secret\n    public\n  end\n  secret[Secret Key]--\x3esigning\n  public[Public Key]--\x3everifying\t\t\n  style key-pair fill:#FFD03B\n  style payload fill:#FFD03B\n  click secret,public "'+Object(i.a)("docs/knowledge/tezos_protocol/cryptography/key-pair")+'"\n',mdxType:"Mermaid"})),Object(r.b)("p",null,"In practice, the public key is ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"key-pair"}),"linked")," to an ",Object(r.b)("em",{parentName:"p"},"address"),". The address represents an ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"../account"}),"account")," that holds a balance. Whenever a user instructs to change its balance by performing a transfer transaction to another user, the protocol that is executed by a ",Object(r.b)("em",{parentName:"p"},"node"),", performs a check on the signature. In other words, it makes sure that the owner of the account authorizes the change. "),Object(r.b)("p",null,"The following diagram shows the necessary steps to create a valid ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"../operations/oerpations"}),"operation"),". This happens on the client's side before the operation gets announced to the Tezos node. You can read up on the operation's life-cycle in the operation section ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"../operations/operations"}),"overview"),"."),Object(r.b)("p",null,"The operation is created with the help of an ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"../../references/taquito"}),"SDK"),' and prepared as JSON. The serialization to binary is called "forging" in Tezos. A watermark is added and then ',Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"hash"}),"hashed")," using the Balke2b algorithm. The output is signed with the secret key following the signature scheme",Object(r.b)("sup",Object(a.a)({parentName:"p"},{id:"fnref-1"}),Object(r.b)("a",Object(a.a)({parentName:"sup"},{href:"#fn-1",className:"footnote-ref"}),"1")),". The signature is added",Object(r.b)("sup",Object(a.a)({parentName:"p"},{id:"fnref-2"}),Object(r.b)("a",Object(a.a)({parentName:"sup"},{href:"#fn-2",className:"footnote-ref"}),"2"))," to the previous operation binary and finally injected in the Tezos node using RPC. This means that the operation had been announced to the blockchain network and its status is pending, until it is included in the next block."),Object(r.b)("center",null,Object(r.b)(c.a,{chart:'\ngraph TD\n\tA[Operation in JSON] --\x3e|forge| B[Operation in Binary]\n\tB --\x3e C(Add Watermark)\n  C --\x3e blake("Blake2b_Hash()")\n  secret[Secret Key]--\x3esign\n  blake --\x3e sign("eg. Ed25519_Sign()")\n  sign --\x3e signature[Signature]\n  signature --\x3e|join|signed\n\tB --\x3e|join| signed[Signed Operation]\n  signed --\x3e|inject through RPC| node("Tezos Node")\t\n  style node fill:#FFD03B,stroke:#000000\n',mdxType:"Mermaid"})),Object(r.b)("div",{className:"footnotes"},Object(r.b)("hr",{parentName:"div"}),Object(r.b)("ol",{parentName:"div"},Object(r.b)("li",Object(a.a)({parentName:"ol"},{id:"fn-1"}),"Ed25519, Secp256k1 (ECDSA), NIST P256 (ECDSA) learn more by reading up on ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"../account"}),"accounts"),Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"#fnref-1",className:"footnote-backref"}),"\u21a9")),Object(r.b)("li",Object(a.a)({parentName:"ol"},{id:"fn-2"}),"The source code for adding ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://gitlab.com/tezos/tezos/-/blob/master/src/lib_crypto/signature.ml"}),"signatures")," in lib_crypto ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"#fnref-2",className:"footnote-backref"}),"\u21a9")))))}d.isMDXComponent=!0},166:function(e,t,n){"use strict";var a=n(0),o=n(36);t.a=function(){return Object(a.useContext)(o.a)}},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(166),o=n(171);function r(e,{forcePrependBaseUrl:t=!1,absolute:n=!1}={}){const{siteConfig:{baseUrl:r="/",url:i}={}}=Object(a.a)();if(!e)return e;if(t)return r+e;if(!Object(o.a)(e))return e;const c=r+e.replace(/^\//,"");return n?i+c:c}},171:function(e,t,n){"use strict";function a(e){return!1===/^(https?:|\/\/|mailto:|tel:)/.test(e)}n.d(t,"a",(function(){return a}))},174:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(190),i=n.n(r);i.a.initialize({startOnLoad:!0,themeCSS:"\n\t\t\t.node rect { fill: #f7f8fe; stroke: #000000 } \n\t\t\t.node polygon { fill: #f7f8fe; stroke: #000000 } \n\t\t\t.node path { fill: #f7f8fe; stroke: #000000 } \n\t\t\t.nodeWarning > rect{fill:#FFD03B; stroke:#000000;}\n\t\t\t.nodeDanger > rect{fill: #F86D70; stroke:#000000;} \n\t\t\t.nodeTezos > .label{color: #ffffff} \n\t\t\t.nodeTezos > rect {fill: #536DFE}\n\t\t"});t.a=({chart:e})=>(Object(a.useEffect)(()=>{i.a.contentLoaded()},[]),o.a.createElement("div",{className:"mermaid"},e))},191:function(e,t){},192:function(e,t){},193:function(e,t){},194:function(e,t){},195:function(e,t){},196:function(e,t){},197:function(e,t){},198:function(e,t){},200:function(e,t){},201:function(e,t){},202:function(e,t){},203:function(e,t){},204:function(e,t){},207:function(e,t,n){var a={"./locale":173,"./locale.js":173};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=207}}]);